#define VMX_PHASE 3 
#include "/vmm/data/user_disks/vmxc/common.vmx.p3.defs" 
#include "/vmm/bin/common.defs" 
#define VMX_DISK1 basedisk "/vmm/data/user_disks/lyu/junos-x86-64-20.4R2.6.vmdk";


TOPOLOGY_START(vmx_topology)


VMX_CHASSIS_START()


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  CE1

VMX_CHASSIS_START()
	VMX_RE_START(CE1_re, 0)
		VMX_RE_INSTANCE(CE1_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/CE1_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(CE1_MPC0, 0)
		VMX_MPC_INSTANCE(CE1_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private1)
		VMX_CONNECT(GE(0,0,1), private2)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  PE1

VMX_CHASSIS_START()
	VMX_RE_START(PE1_re, 0)
		VMX_RE_INSTANCE(PE1_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/PE1_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(PE1_MPC0, 0)
		VMX_MPC_INSTANCE(PE1_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private1)
		VMX_CONNECT(GE(0,0,1), private3)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  PE2

VMX_CHASSIS_START()
	VMX_RE_START(PE2_re, 0)
		VMX_RE_INSTANCE(PE2_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/PE2_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(PE2_MPC0, 0)
		VMX_MPC_INSTANCE(PE2_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private2)
		VMX_CONNECT(GE(0,0,1), private4)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  PE3

VMX_CHASSIS_START()
	VMX_RE_START(PE3_re, 0)
		VMX_RE_INSTANCE(PE3_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/PE3_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(PE3_MPC0, 0)
		VMX_MPC_INSTANCE(PE3_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private5)
		VMX_CONNECT(GE(0,0,1), private6)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  PE4

VMX_CHASSIS_START()
	VMX_RE_START(PE4_re, 0)
		VMX_RE_INSTANCE(PE4_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/PE4_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(PE4_MPC0, 0)
		VMX_MPC_INSTANCE(PE4_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private7)
		VMX_CONNECT(GE(0,0,1), private8)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  Core

VMX_CHASSIS_START()
	VMX_RE_START(Core_re, 0)
		VMX_RE_INSTANCE(Core_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/Core_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(Core_MPC0, 0)
		VMX_MPC_INSTANCE(Core_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private3)
		VMX_CONNECT(GE(0,0,1), private4)
		VMX_CONNECT(GE(0,0,2), private5)
		VMX_CONNECT(GE(0,0,3), private7)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


#define VMX_CHASSIS_I2CID 33 //**** MX480 Chassis_1
#define VMX_CHASSIS_NAME  CE2

VMX_CHASSIS_START()
	VMX_RE_START(CE2_re, 0)
		VMX_RE_INSTANCE(CE2_re0, VMX_DISK1, VMX_RE_I2CID, 0)
		install "/volume/CSdata/lyu/vmm/EVPN/EVPN_VLAN_Based_Service/CE2_config" "/root/olive.conf";
	VMX_RE_END

	VMX_MPC_START(CE2_MPC0, 0)
		VMX_MPC_INSTANCE(CE2_MPC0, VMX_DISK1, VMX_MPC_I2CID, 0)
		VMX_CONNECT(GE(0,0,0), private6)
		VMX_CONNECT(GE(0,0,1), private8)
	VMX_MPC_END
VMX_CHASSIS_END

#undef VMX_CHASSIS_I2CID
#undef VMX_CHASSIS_NAME


PRIVATE_BRIDGES
TOPOLOGY_END

